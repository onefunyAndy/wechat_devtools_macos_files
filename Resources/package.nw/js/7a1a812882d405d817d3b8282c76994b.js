'use strict';!function(require,directRequire){const a=require('path'),b=require('source-map'),c=require('./a63026ab5a5a3c59a61a9749a18aa2ca.js'),d=require('./a89be4febc57a81e9865a060f74e14c8.js'),e=require('./e53dfc2b83456f986002c49964f30fbf.js'),f=require('./80a27260d67a4c5a94011a75ea778fcb.js'),g=require('./6e1614a32b5d10964071477dd7310d21.js'),h=require('./2d8c17f8789be1869edbd369314f5eaa.js'),i=require('./503c215d003cb9646f16deee95253baf.js'),{NO_BOM_VAR:j}=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),k=require('./72653d4b93cdd7443296229431a7aa9a.js'),l=require('./91813390c7af1ab7c0fa362a5ecb48b9.js'),m=require('./2e9637e8a0816a626f7db9a0dee5efe8.js'),n=['define','require','module','exports','global','wx','App','Page','Component','Behavior','getApp','getCurrentPages'],o=async(a,h={})=>{const{pluginId:l,version:o}=h,p=`${l}_${o}`;await m.init(a);const q=m.CACHE_KEYS.JS_APPSERVICE_PLUGIN,r=a.setting&&a.setting.nodeModules?'nodeModules':'main',s=await c(a);let t=m.get(q,r);if(t&&t.code&&t.key==p&&t.es6==a.setting.es6)return t.code;const u=[];let v=[];const w=new b.SourceMapGenerator({file:`${l}.js`});let x=0;const y=await d(a);v.push(`definePlugin("plugin://${l}", function(${n.join(',')}) {`),v.push('var __wxAppCode__ = global.__wxAppCode__'),u.push(v.join(';')),x++;const z=await g(a,{cut:!0,pluginId:l,version:o});u.push(`${z.code}`),x+=z.code.split('\n').length;const A=await i(a,{wxss:!1,prefix:z.name,pluginId:l,version:o});u.push(A.join(';')),x++;const B=s.getAllJSFiles();let C={};for(let c=0,d=B.length;c<d;c++){const d=B[c];if(C[d])continue;C[d]=!0;const e=await f(a,d);if(u.push(`define("${d}", function(require, module, exports, ${j}){ "use strict";`),x++,u.push(e.code),e.map)try{const a=new b.SourceMapConsumer(e.map);w.setSourceContent(d,a.sourcesContent[0]),a.eachMapping((a)=>{w.addMapping({generated:{line:x+a.generatedLine,column:a.generatedColumn},original:{line:a.originalLine,column:a.originalColumn},source:d,name:a.name})})}catch(a){k.error(`error while running sourcemap generation for plugin code that is babelled: \n\t [file]: ${d} \n\t [error info]: ${a}`)}else if(e.code){w.setSourceContent(d,e.code);for(let a=1,b=e.code.split('\n').length;a<=b;a++)w.addMapping({generated:{line:x+a,column:0},original:{line:a,column:0},source:d})}x+=e.code.split('\n').length,u.push('})'),x++}const D=await e.getFileList(a);if(C={},v=[],D.forEach((a)=>{if(!C[a]){C[a]=!0;const b=a.replace(/\"/g,'\\"');v.push(`global.__wxAppCurrentFile__ = "plugin-private://${l}/${b}.js"`),v.push(`global.__wxRoute = "__plugin__/${l}/${b}"`),v.push('global.__wxRouteBegin = true'),v.push(`require("${a}.js")`)}}),u.push(v.join(';')),x++,y.publicComponents||y.pages){for(const a in v=[],y.publicComponents)v.push(`"plugin://${l}/${a}": "plugin-private://${l}/${y.publicComponents[a]}"`);for(const a in y.pages)v.push(`"plugin://${l}/${a}": "plugin-private://${l}/${y.pages[a]}"`);u.push(`global.publishDomainComponents({${v.join(',')}})`),x++}return y.main&&(u.push(`module.exports = function(){return require("${y.main}")}`),x++),u.push(`})
requirePlugin("plugin://${l}")
//# sourceMappingURL=appservice.js.map`),x+=2,t={key:`${l}_${o}`,es6:!!a.setting.es6,code:u.join('\n'),sourcemap:w.toString()},m.set(q,r,t),t.code};module.exports={getServiceCode:async(a,b={})=>{const{pluginId:c,version:d}=b,e=`${c}_${d}`;if(!('dev'==d)){const a=await h.getCode(c,d);return a['/appservice.js']}else if(c==a.appid)return await o(a,b)},getServiceCodeMap:async(a,b={})=>{const{pluginId:c,version:d}=b;if('dev'==d&&c==a.appid){const b=`${c}_${d}`;await m.init(a);const e=m.CACHE_KEYS.JS_APPSERVICE_PLUGIN,f=a.setting&&a.setting.nodeModules?'nodeModules':'main',g=m.get(e,f);if(g&&g.code&&g.key==b&&g.es6==a.setting.es6)return g.sourcemap}return''}}}(require('lazyload'),require);