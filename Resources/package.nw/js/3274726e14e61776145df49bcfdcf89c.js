'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('react'),b=require('classnames'),c=require('./eadce02c750c875a10680bcfedadec88.js'),d=require('./fc137838572a83604db39acff8e909e0.js'),e=require('./a8c87029da0fa06e986298d447ab0fe2.js'),f=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),g=require('./875171e7b864aa58d026d4fa0999fbd1.js'),h=require('./common/locales/index.js'),{connect:i}=require('react-redux');class j extends a.Component{constructor(a){super(a),this.state=_extends({show:a.show},a.config)}componentDidMount(){this._cancalLocaleListener=h.onChangeLocale(()=>this.forceUpdate())}componentWillUnmount(){this._cancalLocaleListener()}componentWillReceiveProps(a){a.show!=this.props.show&&this.setState({show:a.show}),a.config!=this.props.config&&this.setState(_extends({},a.config))}onConfirmClick(){this.setState({show:!1}),this.props.setToolbarConfig({cos:this.state.cos,qcloud:this.state.qcloud,tgit:this.state.tgit,upload:this.state.upload,test:this.state.test,bbs:this.state.bbs,plugin:this.state.plugin})}onAnimationOut(){this.props.setToolbarConfigWnd({show:!1})}onIconClick(a){this.setState({[a]:!this.state[a]})}onPluginIconClick(a){this.setState({plugin:_extends({},this.state.plugin,{[a]:!(!1!==this.state.plugin[a])})})}getCheckboxState(c){return a.createElement('i',{className:b({"ui-icon-checkbox":!c,"ui-icon-checkbox-o":c})})}rendToolbarPluginIcon(){const b=this.props;let c=[];for(const d in b.pluginManifests){const e=b.pluginManifests[d];e.toolbar&&c.push(a.createElement('div',{className:'toolbar-item',key:d,onClick:this.onPluginIconClick.bind(this,d)},a.createElement('div',{className:'toolbar-action'},a.createElement('div',{className:'toolbar-button'},a.createElement('i',{style:{background:`url(${e.toolbar_icon}) no-repeat 50% 50%`,display:'inline-block',verticalAlign:'middle',width:12,height:12}})),a.createElement('p',{className:'toolbar-label'},e.name)),a.createElement('label',{className:'ui-checkbox'},this.getCheckboxState(!1!==this.state.plugin[d]))))}return c}render(){const b=this.props,c=b.project.attr||{},d=c.gameApp,e=c.qcloud&&c.qcloud.qcloud_status&&1===c.qcloud.qcloud_status.open_qc_account;return a.createElement(g,{show:this.state.show,inClassName:'ui-animate-pull-down ui-dialog',outClassName:'ui-animate-pull-up ui-dialog',onAnimationOut:this.onAnimationOut.bind(this),style:{width:600,marginLeft:-300}},a.createElement('div',{className:'ui-dialog-hd'},a.createElement('h3',{className:'ui-dialog-title'},h.config.TOOLBAR_ICON_MANAGER_TITLE)),a.createElement('div',{className:'ui-dialog-bd'},a.createElement('div',{className:'toolbar-item-group'},a.createElement('div',{className:'toolbar-item',onClick:this.onIconClick.bind(this,'upload')},a.createElement('div',{className:'toolbar-action'},a.createElement('div',{className:'toolbar-button'},a.createElement('i',{className:'ui-icon-upload'})),a.createElement('p',{className:'toolbar-label'},h.config.TOOLBAR_UPLOAD)),a.createElement('label',{className:'ui-checkbox'},this.getCheckboxState(this.state.upload))),a.createElement('div',{className:'toolbar-item',style:{display:d?'none':''},onClick:this.onIconClick.bind(this,'test')},a.createElement('div',{className:'toolbar-action'},a.createElement('div',{className:'toolbar-button'},a.createElement('i',{className:'ui-icon-beaker'})),a.createElement('p',{className:'toolbar-label'},h.config.TOOLBAR_TEST)),a.createElement('label',{className:'ui-checkbox'},this.getCheckboxState(this.state.test))),a.createElement('div',{className:'toolbar-item',onClick:this.onIconClick.bind(this,'bbs')},a.createElement('div',{className:'toolbar-action'},a.createElement('div',{className:'toolbar-button'},a.createElement('i',{className:'ui-icon-community'})),a.createElement('p',{className:'toolbar-label'},h.config.TOOLBAR_BBS)),a.createElement('label',{className:'ui-checkbox'},this.getCheckboxState(this.state.bbs))),e?a.createElement('div',{className:'toolbar-item',onClick:this.onIconClick.bind(this,'qcloud')},a.createElement('div',{className:'toolbar-action'},a.createElement('div',{className:'toolbar-button'},a.createElement('i',{className:'ui-icon-cloud'})),a.createElement('p',{className:'toolbar-label'},h.config.TOOLBAR_TENCENT_CLOUD)),a.createElement('label',{className:'ui-checkbox'},this.getCheckboxState(this.state.qcloud))):null,a.createElement('div',{className:'toolbar-item',onClick:this.onIconClick.bind(this,'cos')},a.createElement('div',{className:'toolbar-action'},a.createElement('div',{className:'toolbar-button'},a.createElement('i',{className:'ui-icon-material'})),a.createElement('p',{className:'toolbar-label'},h.config.TOOLBAR_MATERIAL_MANAGEMENT)),a.createElement('label',{className:'ui-checkbox'},this.getCheckboxState(this.state.cos))),this.rendToolbarPluginIcon())),a.createElement('div',{className:'ui-dialog-ft',onClick:this.onConfirmClick.bind(this)},a.createElement('div',{className:'ui-dialog-action'}),a.createElement('div',{className:'ui-dialog-action'},a.createElement('button',{className:'ui-button ui-button-primary'},h.config.CONFIRM))))}}module.exports=i((a)=>({project:a.project.current||{},show:a.window.toolbarConfig&&a.window.toolbarConfig.show,pluginManifests:a.config.pluginManifests,config:a.toolbar.config}),(a)=>({setToolbarConfig:f.bindActionCreators(d.setToolbarConfig,a),setToolbarConfigWnd:f.bindActionCreators(e.setToolbarConfig,a)}))(j)}(require('lazyload'),require);