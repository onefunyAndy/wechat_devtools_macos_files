'use strict';!function(require,directRequire){const a=require('path'),b=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),c=require('./3bfffbe88b3d923921f851c0697974fe.js'),d=require('./84b183688a46c9e2626d3e6f83365e13.js'),e=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),f=require('./a1dd553cc059d528bb0ef56afed53968.js');let g=1;module.exports={createLoadSubPackageTask:async function(a,h,i){const j=c.getCurrent(),k=i(),l=k.simulator.appConfig,m=l&&l.subPackages;let n=h.args.moduleName,o=!1;if(`/${e.MINI_PROGRAM_MAIN_PACKAGE_ROOT}/`===n?(n=e.MINI_PROGRAM_MAIN_PACKAGE_ROOT,o=!0):m.forEach((a)=>{let b=a.root;/\.js$/.test(a.root)||(b=d.normalizePath('/'+a.root+'/')),b==n&&(o=!0)}),!o)return{errMsg:`${h.api}:fail module not found`};if(j.attr&&j.attr.gameApp)a({type:b.SIMULATOR_LOAD_GAME_SUBPACKAGE,data:{root:n,taskId:g}});else{const c=n.replace(/^\//,'');if(k.simulator.subPackageLoaded[c]&&k.simulator.subPackageLoaded[c].loaded){const a=function(a,b){f.triggerOnEvent({eventName:'onLoadSubPackageTaskStateChange',data:{state:'success',taskId:a,moduleName:b}})}.bind(null,g,c);setTimeout(a)}else a({type:b.SIMULATOR_LOAD_SUBPACKAGE,data:{loaded:!1,taskId:g,root:c}})}return{loadTaskId:g++,errMsg:`${h.api}:ok`}}}}(require('lazyload'),require);