'use strict';!function(require,directRequire){function a(a,b,c,d){c=0<c?c:1;const e=h(a,b,c);return`${d}\n${e}`}const b=require('fs'),c=require('path'),d=require('./3bfffbe88b3d923921f851c0697974fe.js'),e=require('./949d8235c744ced2a80121e4dba34c28.js'),f=require('./6242f55dbdfe53c2f07b7a51568311f2.js').errorPrefix,g=require('./libs/jsonlint.js').parser,h=require('babel-code-frame'),i=require('./162bf2ee28b76d3b3d95b685cede4146.js'),j=require('./a63026ab5a5a3c59a61a9749a18aa2ca.js'),k=require('./common/locales/index.js');g.parseError=g.lexer.parseError=function(a,b){throw b};const l={};l.parseWXMLRuntimeErr=async(b)=>{const c=d.getCurrent();let e=b.message,g=[],h='',l='';if(f.WXML_PLUGIN_RUNTIME_ERROR_REG.test(e)){const a=f.WXML_PLUGIN_RUNTIME_ERROR_REG.exec(e);e=e.replace(f.WXML_PLUGIN_RUNTIME_ERROR_REG,'').replace(/`/g,'\\`'),g=e.split(':'),h=k.config.PARSEERR_MSG_FILE.format([a[1],a[2],g[0]]);try{const a=await j(c);l=a.getFile(g[0])}catch(a){return{file:h,msg:e}}}else{e=e.replace(f.WXML_RUNTIME_ERROR_REG,'').replace(/`/g,'\\`'),e=e.replace('WXMLRT:',''),g=e.split(':'),h=g[0];try{const a=await i(c);l=a.getFile(h)}catch(a){return{file:h,msg:e}}}const m=parseInt(g[2]),n=parseInt(g[3]);if(-1!==m)try{const b=e.replace(`${g[0]}:${g[1]}:${g[2]}:${g[3]}:`,'').replace(/`/g,'"');e=a(l,m,n,b)}catch(a){}return{file:h,msg:e}},l.parseJsFileErr=async(a)=>{const b=a.file.replace(/\.js$/,''),c=a.project,d=await i(c),e=JSON.parse(d.getFile('app.json')),f=e.pages,g=f.findIndex((a)=>a==b);return{file:b,msg:` app.json.pages\n > | pages[${g}] : ${f[g]}`}},l.parseJsonContentErr=(a)=>({file:a.file,msg:a.data}),l.parseJsonEntranceErr=(a)=>{const b=JSON.parse(a.data),c=b.pages;return{file:a.file,msg:k.config.PARSEERR_ENTRANCE_PAGE_ERROR.format(JSON.stringify(c))}},l.parseJsonFileErr=(a)=>({file:a.file,msg:k.config.PARSEERR_ENTRANCE_FILE_ERROR.format(a.file)}),l.parseJsonParseErr=(b)=>{const c=b.data;try{g.parse(c)}catch(b){const d=`Expecting ${b.expected}, got ${b.token}`,e=a(c,b.line,b.loc.first_column,d);return e}return b.error},l.parsePluginWxmlErr=async(b,c)=>{const d=(c||'').trim().split(':');try{if(d.length){const c=await j(b),e=parseInt(d[1].trim()),f=parseInt(d[2].trim()-1),g=a(c.getFile(d[0]),e,f,d[3]),h={file:d[0],msg:g};return h}}catch(a){return{file:'',msg:c}}},l.parseWxmlErr=async(b,c)=>{const d=(c||'').trim().split(':');try{if(d.length){const c=await i(b),e=parseInt(d[1].trim()),f=parseInt(d[2].trim()-1),g=a(c.getFile(d[0]),e,f,d[3]),h={file:d[0],msg:g};return h}}catch(a){return{file:'',msg:c}}},l.parseWxssErr=async(b,c)=>{try{if(c='object'==typeof c?c.msgForConsole:c,c=c.split('\n')[0],/not found from/.test(c)){const a=c.match(/ERR:.+?`(.+)`.+?`(.+)`/),b=a[1],d=a[2],e={file:d,msg:`File not found: ${b}`};return e}const d=c.match(/ERR:\s(.+)\((\d*):(\d*)\):\s*?(.+)/),e=parseInt(d[2]),f=parseInt(d[3]-1),g=d[4].replace(/`/g,'"'),h=d[1],j=await i(b),k=j.getFile(h),l=a(k,e,f,g);return{file:h,reason:g,msg:l}}catch(a){return{file:'',msg:c}}},module.exports=l}(require('lazyload'),require);