'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('react'),b=require('./e3681b47a6ce46a8998b8cdff40bdb12.js'),c=require('./84b183688a46c9e2626d3e6f83365e13.js'),d=require('./5c35f819ec22ae81c6f8ea88445932d6.js');class e extends a.Component{constructor(a){super(a),this.state={mouseDown:!1}}onTextViewClick(){const a=this.props.node;a.transEvt||!a.clickable||b.triggerOnEvent({eventName:'onTextViewClick',data:{data:a.data}})}onImageViewClick(){const a=this.props.node;a.transEvt||!a.clickable||b.triggerOnEvent({eventName:'onImageViewClick',data:{data:a.data}})}onMouseDown(a){const c=this.props.node;c.transEvt||(c.clickable?(a.stopPropagation(),this.setState({mouseDown:!0})):c.gesture&&(a.stopPropagation(),b.triggerOnEvent({eventName:'onTouchStart',data:{touch:{x:a.pageX-this.props.containerLeft,y:a.pageY-this.props.containerTop,id:c.viewId},data:c.data}})))}onMouseUp(a){const c=this.props.node;c.transEvt||!c.clickable||(c.clickable?(a.stopPropagation(),this.setState({mouseDown:!1})):c.gesture&&(a.stopPropagation(),b.triggerOnEvent({eventName:'onTouchEnd',data:{touch:{x:a.pageX-this.props.containerLeft,y:a.pageY-this.props.containerTop,id:c.viewId},data:c.data}})))}onMouseMove(a){const c=this.props.node;c.transEvt||c.gesture&&(a.stopPropagation(),b.triggerOnEvent({eventName:'onTouchMove',data:{touch:{x:a.pageX-this.props.containerLeft,y:a.pageY-this.props.containerTop,id:c.viewId},data:c.data}}))}getStyle(){const a=this.props.node||{},b=a.style||{},d=a.type,e=a.position;let f=parseFloat(b.opacity);f=isNaN(f)?1:Math.max(0,Math.min(1,f));let g=_extends({display:a.hide?'none':'',pointerEvents:a.transEvt?'none':'',boxSize:'border-box',overflow:b.overflow,backgroundColor:b.bgColor,borderRadius:b.borderRadius,borderWidth:b.borderWidth+'px',borderColor:b.borderColor,borderStyle:'solid',opacity:b.opacity,position:b.fixed?'fixed':'absolute'},e);if('array'===c.getType(b.padding)&&(g.padding=b.padding.join('px ')+'px'),'text'==d){const b=a.label||{};g=_extends({},g,{color:b.color,fontSize:b.fontSize,textAlign:b.textAlign,fontWeight:b.fontWeight,lineHeight:b.lineHeight?b.lineHeight+'px':1,lineBreak:b.lineBreak})}const h=a.animation;if(h){const a=h.finalStyle;a&&(g.transform='','undefined'!=typeof a.scaleX&&(g.transform+=` scaleX(${a.scaleX})`),'undefined'!=typeof a.scaleY&&(g.transform+=` scaleX(${a.scaleY})`),'undefined'!=typeof a.rotate&&(g.transform+=` rotate(${a.scaleX}deg)`),'undefined'!=typeof a.opacity&&(g.opacity=a.opacity),'undefined'!=typeof a.left&&(g.left=a.left+'px'),'undefined'!=typeof a.top&&(g.top=a.top+'px'),g.transition=`all ${h.duration}ms ${h.easing}`)}return this.state.mouseDown&&(g.opacity?g.opacity*=0.6:g.opacity=0.6),g}getSonNodes(){const b=this.props.node,c=this.props.tree,d=[];return(b.sons||[]).forEach((b)=>{c[b]&&d.push(a.createElement(e,{key:b,node:c[b],tree:c,containerLeft:this.props.containerLeft,containerTop:this.props.containerTop}))}),d}renderTextNode(){const b=this.props.node,c=this.getStyle();return a.createElement('div',{style:c,onClick:this.onTextViewClick.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseMove:this.onMouseMove.bind(this),onMouseUp:this.onMouseUp.bind(this)},b.label&&b.label.content,this.getSonNodes())}renderImageNode(){const b=this.props.node,c=this.getStyle();return c.overflow='hidden',a.createElement('div',{style:c,onClick:this.onImageViewClick.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseMove:this.onMouseMove.bind(this),onMouseUp:this.onMouseUp.bind(this)},a.createElement('img',{src:b.iconPath,style:{width:'100%',height:'100%'}}),this.getSonNodes())}renderNativeNode(){this.props.node;return a.createElement('div',null,a.createElement(d,{node:this.props.node}),this.getSonNodes())}render(){const a=this.props.node.type;if('text'==a)return this.renderTextNode();return'image'==a?this.renderImageNode():'native'==a?this.renderNativeNode():null}}module.exports=e}(require('lazyload'),require);