"use strict";!function(require,directRequire){function a(c,d,e,f,g,h){var i=Math.min,j=Math.max;const k=j(d-1,0),l=j(e-1,0),m=i(d+1,f-1),n=i(e+1,g-1);let o,p,q,r,s=0,t=0,u=0,v=0,w=0;for(let a=k;a<=m;a++)for(let g=l;g<=n;g++){if(a===d&&g===e)continue;const i=b(c,c,4*(e*f+d),4*(g*f+a),!0);if(0===i?s++:0>i?u++:0<i&&t++,2<s)return!1;h&&(i<v&&(v=i,o=a,p=g),i>w&&(w=i,q=a,r=g))}return!h||(0==u||0==t?!1:!a(c,o,p,f,g)&&!a(h,o,p,f,g)||!a(c,q,r,f,g)&&!a(h,q,r,f,g))}function b(a,b,g,h,j){const k=a[g+3]/255,l=b[h+3]/255,m=f(a[g+0],k),n=f(a[g+1],k),o=f(a[g+2],k),p=f(b[h+0],l),r=f(b[h+1],l),s=f(b[h+2],l),t=c(m,n,o)-c(p,r,s);if(j)return t;const u=d(m,n,o)-d(p,r,s),i=e(m,n,o)-e(p,r,s);return 0.5053*t*t+0.299*u*u+0.1957*i*i}function c(a,c,d){return 0.29889531*a+0.58662247*c+0.11448223*d}function d(a,c,d){return 0.59597799*a-0.2741761*c-0.32180189*d}function e(a,c,d){return 0.21147017*a-0.52261711*c+0.31114694*d}function f(b,c){return 255+(b-255)*c}function g(a,c,d,e,f){a[c+0]=d,a[c+1]=e,a[c+2]=f,a[c+3]=255}function h(d,e){const h=d[e+3]/255,a=f(d[e+0],h),i=f(d[e+1],h),g=f(d[e+2],h);return c(a,i,g)}module.exports=function(c,d,e,i,j,k){k||(k={});const l=k.threshold===void 0?0.1:k.threshold;let m=0;for(let n=0;n<j;n++)for(let o=0;o<i;o++){const p=4*(n*i+o),q=b(c,d,p,p);if(q>35215*l*l)!k.includeAA&&(a(c,o,n,i,j,d)||a(d,o,n,i,j,c))?e&&g(e,p,255,255,0):(e&&g(e,p,255,0,0),m++);else if(e){const a=f(h(c,p),0.1);g(e,p,a,a,a)}}return m}}(require("lazyload"),require);