'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('react'),b=require('fs'),c=require('glob'),d=require('path'),e=require('classnames'),f=require('mkdir-p'),g=require('./72653d4b93cdd7443296229431a7aa9a.js'),h=require('./15ba1827c7f6564a45df6bd44da3a977.js'),i=require('./da7c31daaf542cf1796023d8e344b98a.js'),j=require('./f171257bbcaef547a3cf27266ccb0db2.js'),k=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),l=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),m=require('./common/locales/index.js'),n=require('./6620a0cf7dad1b400d60f0fdae40f524.js'),o=require('./d28a711224425b00101635efe1034c99.js'),p=require('./bc04f89cf8edab62335086e0a2a5a103.js'),q=require('./0c3c9007e8a81c513edeb550733e4fab.js'),r=require('./9fdd4ac31a05c27355910f0d74accd4c.js'),s=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),t=require('./92320c1386e6db6a6f2556736a9bc280.js'),u=require('./42191d95974f14b18961c9f2c730464e.js'),v=require('./da189bc919cfd050066ec695411cbcf5.js'),w=require('./84b183688a46c9e2626d3e6f83365e13.js'),x=require('./2254692212b7d32a3c1405f399460682.js'),{DEV_INVALID_APPID:y,DEV_APP_NOT_BAND:z}=require('./df6d0ff021a69fb541c733de4dbba0fe.js'),{default_weapp_header:A,default_tourist_weapp_header:B}=require('./5498e660c05c574f739a28bd5d202cfa.js'),{TOURIST_APPID:C,GAME_TOURIST_APPID:D}=s,E='darwin'===process.platform,F={network:{RequestDomain:[],WsRequestDomain:[],UploadDomain:[],DownloadDomain:[]},setting:_extends({},s.setting)},G=()=>[{type:l.QUICKSTART_TYPE.WEAPP_MINI,name:m.config.MINI_PROGRAM},{type:l.QUICKSTART_TYPE.GAME_MINI,name:m.config.MINI_GAME},{type:l.QUICKSTART_TYPE.PLUGIN_MINI,name:m.config.PLUGIN}],H={FILL_FORM:1,PENDING:2,SUCCESS:3,ERROR:4};module.exports=class extends a.Component{constructor(a){super(a),this.handleMaskClick=()=>{this.setState({showMask:!1})};const b=a.options||{},c=b.from||'';let d='';switch(c){case l.MINI_CODE_FROM.URL_SCHEME:{d=b.miniCodeLink;break}default:}this.state={options:a.options,from:c,projectpath:'',appid:'',appname:'',miniCodeLink:d,showMiniCodeDetail:!1,importStatus:H.FILL_FORM,miniCodeInfo:null,saveBtnDisable:!0,checked:!0,showLoading:!1,errorLoc:'',errorMsg:'.',compileType:{name:m.config.TOOLBAR_MINI_PROGRAM_MODE,value:r.weapp},showCompileTypeSelect:!1,isFolderEmpty:!0,showQuickStart:!a.isImport,quickstartDDOpenTs:0,quickstartItems:G(),quickstartSelected:l.QUICKSTART_TYPE.WEAPP_MINI},this.compileTypeConstants=[{name:m.config.TOOLBAR_MINI_PROGRAM_MODE,value:r.weapp},{name:m.config.SESSION_DYNAMIC_PAGE,value:r.conversation},{name:m.config.TOOLBAR_SEARCH_DYNAMIC_PAGE,value:r.search}],this.setupDropdownController()}componentDidMount(){this.resize(),this.state.from&&this.handleExternalInvocation(),this._cancalLocaleListener=m.onChangeLocale(()=>{this.setState({quickstartItems:G()}),this.forceUpdate()})}componentWillUnmount(){this.props.detach&&this.props.close(),this.props.options&&this.props.options.miniCodeLink&&this.props.clearMiniCodeOptions(),this._cancalLocaleListener()}componentDidUpdate(a){a.options!=this.props.options&&this.props.options&&this.props.options.miniCodeLink&&this.handleExternalInvocation()}setupDropdownController(){this.quickstartDDControl={},this.quickstartDDControl.toggle=()=>{const a=this.qsInput.getBoundingClientRect();this.quickstartDDControl.left=a.left+'px',this.quickstartDDControl.top=a.top+25+'px',this.setState({quickstartDDOpenTs:Date.now()})},this.quickstartDDControl.onItemSelected=(a)=>{this.setState({quickstartSelected:this.state.quickstartItems[a].type})}}resize(){try{let a=this.props.win?this.props.win:global.Win;this.props.detach||(a.show(),a.setResizable(!0),a.resizeTo(l.SIZE.CREATE_PROJECT.WIDTH,l.SIZE.CREATE_PROJECT.HEIGHT),a.setResizable(!1))}catch(a){}}handleExternalInvocation(){const a=this.props.options||{},b=a.from;if(b)switch(b){case l.MINI_CODE_FROM.URL_SCHEME:{this.props.isImport&&this.setState({miniCodeLink:a.miniCodeLink,errorLoc:'',errorMsg:'.'},()=>{this.fetchMiniCodeInfo()});break}}}editMiniCodeLink(a){let b=a.target.value;const c={miniCodeLink:b.trim()};'miniCodeLink'===this.state.errorLoc&&(c.errorLoc=''),this.setState(c)}onMiniCodeLinkInputKeyPress(a){'Enter'===a.key&&this.fetchMiniCodeInfo()}async fetchMiniCodeInfo(){if(!this.state.miniCodeLink)return void this.setState({errorLoc:'miniCodeLink',errorMsg:m.config.ENTER_INBOUND_LINK});this.setState({importStatus:H.PENDING});try{let a=x.getMiniCodeID(this.state.miniCodeLink);if(!a)throw new Error('invalid link which contains no valid minicode ID');const{body:c}=await h({url:`${j.getMiniCodeInfoURL}&codeid=${encodeURIComponent(a)}`,needToken:1});if(!c.code_pack||0===c.code_pack.length)return void this.setState({importStatus:H.ERROR,errorLoc:'miniCodeLink',errorMsg:m.config.LINK_ID_NOT_EXIST});const e={miniCodeID:a,projectName:decodeURIComponent(c.code_pack[0].project_name),projectDesc:c.code_pack[0].project_desc,needAppID:c.code_pack[0].need_appid,minLibVersion:c.code_pack[0].min_libver},{body:f}=await h({url:`${j.getMiniCodeURL}&codeid=${a}`,encoding:null,needToken:1,needParse:-1});if(e.code=f,this.props.isImport){try{const a=d.join(t.Weappdest,`${+new Date}-minicode`);b.writeFileSync(a,f,{encoding:null}),e.codePackTmpPath=a}catch(a){return void this.setState({importStatus:H.ERROR,errorLoc:'miniCodeLink',errorMsg:m.config.CODE_PACKAGE_CORRUPTED})}try{e.projectConfigJSON=JSON.parse((await v.asarExtractFile(e.codePackTmpPath,'project.config.json'))||{}),'game'===e.projectConfigJSON.compileType&&(e.isGame=!0),e.projectConfigJSON.isGameTourist&&(e.isGameTourist=!0)}catch(a){}}this.setState({importStatus:H.SUCCESS,miniCodeInfo:e,appname:e.projectName})}catch(a){a&&1==a.errcode?this.setState({importStatus:H.ERROR,errorLoc:'miniCodeLink',errorMsg:m.config.LINK_ID_NOT_EXIST}):this.setState({importStatus:H.ERROR,errorLoc:'miniCodeLink',errorMsg:a.toString()})}}editAppid(a){let b=a.target,c=b.value;const d={appid:c.trim()};'appid'===this.state.errorLoc&&(d.errorLoc=''),this.setState(d)}editAppname(a){let b=a.target,c=b.value;const d={appname:c};'projectname'===this.state.errorLoc&&(d.errorLoc=''),this.setState(d)}chooseDir(a){let c=this.props.win?this.props.win.window.document.body:global.contentDocumentBody,d=a.currentTarget.dataset.type,e=document.createElement('input');e.setAttribute('type','file'),e.setAttribute('nwdirectory',!0),e.style.display='none',c.appendChild(e),e.addEventListener('change',()=>{let a;try{a=b.readdirSync(e.value)}catch(a){return void this.setState({errorLoc:'projectpath',errorMsg:a.toString()})}'darwin'===process.platform&&(a=a.filter((a)=>{return 0!==a.indexOf('.')}));let f={projectpath:e.value,showQuickStart:0===a.length,isFolderEmpty:0===a.length};if(0!==a.length&&'import'===d)f.errorLoc='projectpath',f.errorMsg=m.config.CREATE_PROJECT_TIP_MUST_USE_EMPTY_FOLDER;else{this.state.appname||(f.appname='');const a=u.getConfigFileInfo({projectpath:e.value});a.error||(f=_extends({},f,{appname:`${decodeURIComponent(a.config.projectname||'')}`}),a.config.isGameTourist?f.appid=s.GAME_TOURIST_APPID:a.config.appid===C||(f.appid=`${a.config.appid||''}`)),'projectpath'===this.state.errorLoc&&(f.errorLoc='')}this.setState(f),c.removeChild(e)}),e.addEventListener('cancel',()=>{c.removeChild(e)}),e.click()}onTypeSelectClick(a){let b=this.compileTypeConstants[a],c={showCompileTypeSelect:!1};b&&(c.compileType=b),this.setState(c)}onCompileTypeClick(a){a.stopPropagation();let b=a.currentTarget.getBoundingClientRect();this.setState({compileTypeLeft:b.left,compileTypeTop:b.top+24,showCompileTypeSelect:!this.state.showCompileTypeSelect})}onContainerClick(){this.setState({showCompileTypeSelect:!1})}isTourist(){return this.state.appid?this.state.appid===C:!this.state.appid&&this.state.quickstartSelected!==l.QUICKSTART_TYPE.GAME_MINI}isGameTourist(){return!this.state.appid&&this.state.quickstartSelected===l.QUICKSTART_TYPE.GAME_MINI}async importCodeToDir(a,c){const e=d.join(t.Weappdest,`${+new Date}-minicode`);b.writeFileSync(e,a,{encoding:null}),await v.asarUnpack(e,c);let f={};try{f=JSON.parse(b.readFileSync(d.join(c,'project.config.json'),'utf8'))}catch(a){}return f}async addProject(){let a=this.state.projectpath;if(!a)try{const b=w.generateMD5(`${this.state.appname.trim()}-${+new Date}`);a=d.join(t.WeappMiniCode,b),f.sync(a)}catch(a){return void this.setState({errorLoc:'projectpath',errorMsg:m.config.CREATE_PROJECT_TIP_MUST_CHOOSE_FOLDER})}let c=this.isTourist(),e=this.isGameTourist();this.props.isImport&&this.state.miniCodeInfo&&(this.state.miniCodeInfo.isGameTourist||this.state.miniCodeInfo.isGame&&!this.state.appid)&&(c=!1,e=!0);let n=this.state.appid;c?n=C:e&&(n=D);let p=encodeURIComponent(this.state.appname.trim()),q=o.getVendorConfig(),s=this.props.isImport?encodeURIComponent(this.state.miniCodeInfo.minLibVersion):q.currentLibVersion;if(this.state.quickstartSelected===l.QUICKSTART_TYPE.PLUGIN_MINI&&(!n||n===C||n===D))return void this.setState({errorLoc:'appid',errorMsg:m.config.CREATE_PROJECT_TIP_NO_APPID});if(!n)return void this.setState({errorLoc:'appid',errorMsg:m.config.CREATE_PROJECT_TIP_NO_APPID});if(!p)return void this.setState({errorLoc:'projectname',errorMsg:m.config.CREATE_PROJECT_TIP_NO_NAME});if(!a)return void this.setState({errorLoc:'projectpath',errorMsg:m.config.CREATE_PROJECT_TIP_NO_DIR});let v=`${n}_${p}`,x=k.strToHash(v),E=this.props.project.list[v];if(E)return void this.setState({appname:'',saveBtnDisable:!0,errorLoc:'projectname',errorMsg:m.config.CREATE_PROJECT_TIP_HASH_EXIST.format([n,decodeURIComponent(p)])});try{const c=this.props.isImport;let d=b.readdirSync(a);if('darwin'===process.platform&&(d=d.filter((a)=>{return 0!==a.indexOf('.')})),0!==d.length){if(c)return void this.setState({errorLoc:'projectpath',errorMsg:m.config.CREATE_PROJECT_TIP_MUST_USE_EMPTY_FOLDER});if(0>d.indexOf('app.json')&&0>d.indexOf('project.config.json')&&0>d.indexOf('game.json'))return void this.setState({errorLoc:'projectpath',errorMsg:m.config.CREATE_PROJECT_TIP_MUST_USE_VALID_MINI_APP_FOLDER})}}catch(a){return void this.setState({errorLoc:'projectpath',errorMsg:a.toString()})}this.setState({showLoading:!0});const G=u.getConfigFileInfo({projectpath:a});let H=r.weapp;(this.state.quickstartSelected==l.QUICKSTART_TYPE.PLUGIN_MINI||!G.error&&G.config&&G.config.compileType==r.plugin)&&(H=r.plugin);let I={projectpath:'',appid:'',appname:'',error:'',saveBtnDisable:!0,showLoading:!1,isTourist:!1};if(c){let b={projectid:v,hash:x,appid:n,projectname:p,projectpath:a,appShowImageUrl:B,isAdmin:!1,isTourist:!0,isMiniCode:!0,urlCheck:!1,compileType:H,libVersion:s,attr:_extends({},F)};if(this.props.isImport){b.shareInfo={from:{codeid:this.state.miniCodeInfo.miniCodeID,desc:this.state.miniCodeInfo.projectDesc,minLib:this.state.miniCodeInfo.minLibVersion,needAppID:this.state.miniCodeInfo.needAppID,importTime:+new Date}};try{await this.importCodeToDir(this.state.miniCodeInfo.code,a)}catch(a){this.setState({errorLoc:'miniCodeLink',errorMsg:m.config.CODE_PACKAGE_EXTRACT_FAIL.format(a)})}this.props.createProjectSuccess(b,{initQuickStart:!1})}else this.props.createProjectSuccess(b,{initQuickStart:this.state.isFolderEmpty&&(this.state.quickstartSelected||l.QUICKSTART_TYPE.WEAPP_MINI)});this.setState(I),this.props.detach?(this.props.win.hide(),this.props.setConfirmInfo({show:!0,title:m.config.CONFIRM_OPEN_IN_THIS_WINDOW_TITLE,content:m.config.CONFIRM_OPEN_IN_THIS_WINDOW_CONTENT.format(p),callback:async(a)=>{if(a)try{this.props.setConfirmInfo({show:!1}),this.props.closeProject(),setTimeout(()=>{this.props.openProject(b.projectid),this.props.win.close()},50)}catch(a){this.props.win.close()}else this.props.win.close()}})):this.props.openProject(b.projectid),i(`project_createsuc`,n),h({url:`${j.touristCreateURL}?appid=${n}`,needToken:1}).then(()=>{}).catch((a)=>{g.error(`create tourist project error ${a}`)})}else try{const{resp:b,body:c}=await h({url:`${j.createWeappURL}?appid=${n}`,needToken:1,needCheckErrCode:1});this.setState({showLoading:!1}),g.info(`createstep.js create  ${c}`);let d=c,f=d.baseresponse,k=f?parseInt(f.errcode):0;if(k===z)return this.setState({errorLoc:'appid',errorMsg:m.config.APPID_BOUND_ERR}),nw.Shell.openExternal('https://mp.weixin.qq.com/'),void g.error(`createstep.js create project error ${k}`);if(k===y)return this.setState({errorLoc:'appid',errorMsg:m.config.APPID_EXIST_ERR}),void g.error(`createstep.js create project error ${k}`);if(0===k){let b=d.app_head_img?`${d.app_head_img}/0`:A,c=p;if(d.app_nickname&&(c=encodeURIComponent(d.app_nickname)),E={isAdmin:d.is_admin,isTourist:!1,isGameTourist:e,isMiniCode:!0,projectid:v,hash:x,appid:n,projectname:p,projectpath:a,appShowImageUrl:b,libVersion:s,compileType:H,attr:_extends({},F,{platform:!!d.is_platform,gameApp:!!d.game_app,platformNickname:d.platform_nickname||'',appNickName:c})},d.game_app&&(E.compileType=r.game),E.appShowName=p,c!==p&&(E.appShowName=c),E.platform&&E.platformNickname&&(E.appShowName=E.platformNickname),this.props.isImport){E.shareInfo={from:{codeid:this.state.miniCodeInfo.miniCodeID,desc:this.state.miniCodeInfo.projectDesc,minLib:this.state.miniCodeInfo.minLibVersion,needAppID:this.state.miniCodeInfo.needAppID,importTime:+new Date}};try{await this.importCodeToDir(this.state.miniCodeInfo.code,a)}catch(a){this.setState({errorLoc:'miniCodeLink',errorMsg:m.config.CODE_PACKAGE_EXTRACT_FAIL.format(a)})}this.props.createProjectSuccess(E,{initQuickStart:!1})}else this.props.createProjectSuccess(E,{initQuickStart:this.state.quickstartSelected||l.QUICKSTART_TYPE.WEAPP_MINI});return this.setState(I),this.props.detach?(this.props.win.hide(),this.props.setConfirmInfo({show:!0,title:m.config.CONFIRM_OPEN_IN_THIS_WINDOW_TITLE,content:m.config.CONFIRM_OPEN_IN_THIS_WINDOW_CONTENT.format(p),callback:async(a)=>{if(a)try{this.props.setConfirmInfo({show:!1}),this.props.closeProject(),setTimeout(()=>{this.props.openProject(E.projectid),this.props.win.close()},50)}catch(a){this.props.win.close()}else this.props.win.close()}})):this.props.openProject(E.projectid),void i(`project_createsuc`,n)}let o=c||m.config.SYSTEM_ERROR;this.setState({errorMsg:o.toString(),errorLoc:'appid'})}catch(a){g.error(`create project error: ${a.toString()}`),this.setState({showLoading:!1,errorMsg:a.toString(),errorLoc:'appid'})}}handleSandboxLinkClick(a){'miniprogram'!==a||this._requestingSandboxAccount||this.fillSandboxMiniprogram(),'minigame'!==a||this._requestingSandboxAccount||this.fillSandboxMinigame()}async fetchSandboxAccount(a){this._requestingSandboxAccount=!0;try{const{body:b}=await h({url:j.getSandboxAccountUrl+'?tab='+a,needToken:1,needParse:1,method:'get',data:{tab:a}});this._requestingSandboxAccount=!1;const c=(b||{}).ret_code;if(c&&'0'!==c)throw new Error('ret code '+c);const d=(b||{}).appid||'';if(!d)throw new Error('Empty AppID');return d}catch(a){throw this._requestingSandboxAccount=!1,g.error(a),a}}async fillSandboxMiniprogram(){if(!this._sandboxMiniprogramCachedAppid)try{this._sandboxMiniprogramCachedAppid=await this.fetchSandboxAccount('miniprogram')}catch(a){return void this.setState({fetchSandboxFailed:!0,showLoading:!1,errorMsg:a.toString&&a.toString()||`${a}`,errorLoc:'appid'})}const a={isTourist:!1,isGameTourist:!1,appid:this._sandboxMiniprogramCachedAppid};'appid'===this.state.errorLoc&&(a.errorLoc=''),this.setState(a)}async fillSandboxMinigame(){if(!this._sandboxMinigameCachedAppid)try{this._sandboxMinigameCachedAppid=await this.fetchSandboxAccount('minigame')}catch(a){return void this.setState({fetchSandboxFailed:!0,showLoading:!1,errorMsg:a.toString&&a.toString()||`${a}`,errorLoc:'appid'})}const a={isTourist:!1,isGameTourist:!1,appid:this._sandboxMinigameCachedAppid};'appid'===this.state.errorLoc&&(a.errorLoc=''),this.setState(a)}render(){return this.props.isImport?this.renderImport():this.renderCreate()}renderCreate(){let b=this.isTourist(),c=this.isGameTourist(),d=this.props.cancel,e=this.state.appid;const f='ui-form-item ui-form-item-inline',g=f+' ui-form-item-error',h={WebkitAppRegion:'no-drag'},i=this.compileTypeConstants.map((a)=>{return a.name});let j=this.state.quickstartItems.findIndex((a)=>a.type===this.state.quickstartSelected),k='';-1===j?(j=0,k!==l.QUICKSTART_TYPE.WEAPP_MINI&&(k=G()[0].name)):k=this.state.quickstartItems[j].name;if(this.qsInput&&this.qsInput.getBoundingClientRect){const a=this.qsInput.getBoundingClientRect();a.width+'px'}0<44*(this.state.quickstartItems.length-1)?44*(this.state.quickstartItems.length-1):44;return a.createElement('div',{className:'dashboard',style:{WebkitAppRegion:'drag'},onClick:this.onContainerClick.bind(this)},this.state.showMask?a.createElement('div',{className:'ui-mask ui-mask-transparent',onClick:this.handleMaskClick}):null,a.createElement('div',{className:'dashboard-commands'},a.createElement('div',{className:'dashboard-navigator',style:this.props.detach?{display:'none'}:{}},a.createElement('a',{onClick:d,style:h},a.createElement('i',{className:'ui-icon-back'}),a.createElement('span',null,'\xA0',m.config.MINI_PROGRAM_PROJECT_MANAGE))),a.createElement('div',{className:'dashboard-brand'},a.createElement('div',{className:'dashboard-logo'},a.createElement('i',{className:'ui-icon-mini-app'})),a.createElement('h3',{className:'dashboard-caption'},m.config.CODE_SEGMENT_CREATE)),a.createElement('div',{className:'dashboard-content'},a.createElement('div',{className:'ui-form'},a.createElement('div',{className:'projectname'===this.state.errorLoc?g:f},a.createElement('label',{className:'ui-form-label'},m.config.CODE_SEGMENT_NAME),a.createElement('div',{className:'ui-form-controls'},a.createElement('div',{className:'ui-input-box'},a.createElement('input',{type:'text',placeholder:'',className:'ui-input',style:h,value:this.state.appname,onChange:this.editAppname.bind(this)})))),a.createElement('div',{className:'projectpath'===this.state.errorLoc?g:f},a.createElement('label',{className:'ui-form-label'},m.config.CODE_SEGMENT_DIRECTORY),a.createElement('div',{className:'ui-form-controls'},a.createElement('div',{className:'ui-flex',onClick:this.chooseDir.bind(this),style:h},a.createElement('div',{className:'ui-input-box'},a.createElement('input',{type:'text',readOnly:!0,placeholder:this.state.projectpath||m.config.TEMPORARY_DIRECTORY,className:'ui-input'})),a.createElement('div',{className:'ui-selector ui-selector-default'},a.createElement('div',{className:'ui-selector-dropdown'},a.createElement('i',{className:'ui-icon-arrow-down-o'})))))),a.createElement('div',{className:'appid'===this.state.errorLoc?g:f},a.createElement('label',{className:'ui-form-label'},'AppID'),a.createElement('div',{className:'ui-form-controls'},a.createElement('div',{className:'ui-input-box'},a.createElement('input',{ref:(a)=>this.appidInput=a,style:h,className:'ui-input',value:e,onChange:this.editAppid.bind(this),type:'text',placeholder:''})),a.createElement('p',{className:'ui-form-tips',style:h},m.config.PART_INTERFACE_NEED_APPID,a.createElement('br',null),m.config.USE_TEST_ACCOUNT,a.createElement('a',{onClick:this.handleSandboxLinkClick.bind(this,'miniprogram')},m.config.MINI_PROGRAM),' / ',a.createElement('a',{onClick:this.handleSandboxLinkClick.bind(this,'minigame')},m.config.MINI_GAME)))),a.createElement('div',{className:'ui-form-item ui-form-item-inline',style:this.state.showQuickStart?{}:{display:'none'}},a.createElement('label',{htmlFor:'',className:'ui-form-label'}),a.createElement('div',{className:'ui-form-controls',style:h},a.createElement('div',{className:'ui-flex'},a.createElement('div',{className:'ui-flex-item ui-selector',onClick:this.quickstartDDControl.toggle},a.createElement('p',{className:'ui-selector-input',ref:(a)=>this.qsInput=a},k),a.createElement('div',{className:'ui-selector-dropdown'},a.createElement('i',{className:'ui-icon-arrow-down-o'})),a.createElement(q,{showTs:this.state.quickstartDDOpenTs,location:{left:parseInt(this.quickstartDDControl.left),top:parseInt(this.quickstartDDControl.top)+10},items:this.state.quickstartItems.map((a,b)=>{return{title:a.name+' '.repeat(15),checked:j===b,disabled:j===b,onClick:()=>this.quickstartDDControl.onItemSelected(b)}})}))))),a.createElement('div',{className:'ui-form-item ui-form-item-inline',style:this.state.errorLoc?{}:{display:'none'}},a.createElement('label',{className:'ui-form-label'}),a.createElement('div',{className:'ui-form-controls'},a.createElement('p',{className:'dashboard-error-tips'},this.state.errorMsg))))),a.createElement('div',{className:'dashboard-command-ft'},a.createElement('div',{className:'dashboard-command-action'},a.createElement('button',{className:'ui-button ui-button-primary',onClick:this.addProject.bind(this),style:h},m.config.CODE_SEGMENT_NEW)))))}renderImport(){let b=this.isTourist(),c=this.isGameTourist(),d=this.props.cancel,e=this.state.appid,f=this.state.miniCodeLink;const g='ui-form-item ui-form-item-inline',h='ui-form-item ui-form-item-inline import-snippet-url',i=g+' ui-form-item-error',j={WebkitAppRegion:'no-drag'};this.state.importStatus!==H.SUCCESS&&({WebkitAppRegion:'no-drag'}.display='none');this.compileTypeConstants.map((a)=>{return a.name});return a.createElement('div',{className:'dashboard',style:{WebkitAppRegion:'drag'},onClick:this.onContainerClick.bind(this)},this.state.showMask?a.createElement('div',{className:'ui-mask ui-mask-transparent',onClick:this.handleMaskClick}):null,a.createElement('div',{className:'dashboard-commands'},a.createElement('div',{className:'dashboard-navigator',style:this.props.detach?{display:'none'}:{}},a.createElement('a',{onClick:d,style:j},a.createElement('i',{className:'ui-icon-back'}),a.createElement('span',null,'\xA0',m.config.MINI_PROGRAM_PROJECT_MANAGE))),a.createElement('div',{className:'dashboard-brand'},a.createElement('div',{className:'dashboard-logo'},a.createElement('i',{className:'ui-icon-mini-app'})),a.createElement('h3',{className:'dashboard-caption'},m.config.CODE_SEGMENT_IMPORT_LONG),a.createElement('p',{className:'dashboard-subtitle'},m.config.CODE_SEGMENT_IMPORT_DETAIL)),a.createElement('div',{className:'dashboard-content'},a.createElement('div',{className:'ui-form'},a.createElement('div',{className:'miniCodeLink'===this.state.errorLoc?h+' ui-form-item-error':h},a.createElement('label',{className:'ui-form-label'},m.config.CODE_LINK),a.createElement('div',{className:'ui-form-controls'},a.createElement('div',{className:'ui-input-box'},a.createElement('input',{type:'text',placeholder:'',className:'ui-input',style:j,value:f,onChange:this.editMiniCodeLink.bind(this),onKeyPress:this.onMiniCodeLinkInputKeyPress.bind(this)}),a.createElement('a',{className:'ui-input-opr',style:j,onClick:this.fetchMiniCodeInfo.bind(this)},this.state.importStatus===H.PENDING?a.createElement('i',{className:'ui-icon-spinner'}):a.createElement('i',{className:'ui-icon-arrow-right-o'}))))),this.state.importStatus===H.SUCCESS?[a.createElement('div',{className:'ui-form-item ui-form-item-inline',key:'name_desc'},a.createElement('label',{className:'ui-form-label'},m.config.CODE_SEGMENT_DESCRIPTION),a.createElement('div',{className:'ui-form-controls'},a.createElement('p',{className:'ui-form-tips'},this.state.miniCodeInfo.projectDesc))),a.createElement('div',{className:'projectname'===this.state.errorLoc?i:g,key:'projectname'},a.createElement('label',{className:'ui-form-label'},m.config.CODE_SEGMENT_NAME),a.createElement('div',{className:'ui-form-controls'},a.createElement('div',{className:'ui-input-box'},a.createElement('input',{type:'text',placeholder:'',className:'ui-input',style:j,value:this.state.appname,onChange:this.editAppname.bind(this)})))),a.createElement('div',{className:'projectpath'===this.state.errorLoc?i:g,key:'dir'},a.createElement('label',{className:'ui-form-label'},m.config.STORAGE_DIRECTORY),a.createElement('div',{className:'ui-form-controls'},a.createElement('div',{className:'ui-flex',"data-type":'import',onClick:this.chooseDir.bind(this),style:j},a.createElement('div',{className:'ui-input-box'},a.createElement('input',{type:'text',readOnly:!0,placeholder:this.state.projectpath||m.config.TEMPORARY_DIRECTORY,className:'ui-input'})),a.createElement('div',{className:'ui-selector ui-selector-default'},a.createElement('div',{className:'ui-selector-dropdown'},a.createElement('i',{className:'ui-icon-arrow-down-o'})))))),a.createElement('div',{className:'appid'===this.state.errorLoc?i:g,key:'appid'},a.createElement('label',{className:'ui-form-label'},'AppID'),a.createElement('div',{className:'ui-form-controls'},a.createElement('div',{className:'ui-input-box'},a.createElement('input',{ref:(a)=>this.appidInput=a,style:j,className:'ui-input',value:e,onChange:this.editAppid.bind(this),type:'text',placeholder:this.state.miniCodeInfo.needAppID?m.config.SHARER_FILL_APPID:m.config.PART_INTERFACE_NEED_APPID})),a.createElement('p',{className:'ui-form-tips',style:j})))]:null,a.createElement('div',{className:'ui-form-item ui-form-item-inline',style:this.state.errorLoc?{}:{display:'none'}},a.createElement('label',{className:'ui-form-label'}),a.createElement('div',{className:'ui-form-controls'},a.createElement('p',{className:'dashboard-error-tips'},this.state.errorMsg))))),a.createElement('div',{className:'dashboard-command-ft'},a.createElement('div',{className:'dashboard-command-action'},this.state.importStatus===H.SUCCESS?a.createElement('button',{className:'ui-button ui-button-primary',onClick:this.addProject.bind(this),style:j,disabled:this.state.importStatus!==H.SUCCESS},m.config.CODE_SEGMENT_IMPORT):a.createElement('p',null,'\xA0')))))}}}(require('lazyload'),require);