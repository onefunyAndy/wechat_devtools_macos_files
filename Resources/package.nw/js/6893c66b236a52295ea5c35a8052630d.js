'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('path'),b=require('classnames'),c=require('react'),d=require('redux'),e=require('./ba23d8b47b1f4ea08b9fd49939b9443f.js'),f=require('./3b5f8e2469c474c8d433c1c6926d8999.js'),g=require('./a1dd553cc059d528bb0ef56afed53968.js'),h=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),{default_backgroundColor:i,default_tabBarBorderBlackColor:j,default_tabBarBorderWhiteColor:k}=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),l=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),{connect:m}=require('react-redux');class n extends c.Component{constructor(a){super(a),this.state={animationType:'none',show:!0}}componentDidMount(){}componentWillReceiveProps(a){a.show!=this.props.show&&(a.animation?this.setState({animationType:a.show?'show':'hide'}):this.setState({animationType:'none',show:a.show}))}componentWillUnmount(){}clickTab(a){const b=a.currentTarget,c=b.dataset,d=c.name.replace(/\.html$/,''),e=c.index,f=this.props.list[e];g.triggerOnEvent({eventName:'onTabItemTap',data:{pagePath:d,index:parseInt(e),text:f.text,iconPath:f.iconPath,selectedIconPath:f.selectedIconPath},webviewID:parseInt(this.props.currentWebviewID)}),this.props.tabIndex!=e&&this.props.switchTab(d,e)}renderTop(){const a=this.props;let{tabBar:d,tabIndex:e}=this.props;this.state.show||(e=-1);const g=a.position||'bottom',i=a.list||[],l={};l.backgroundColor=a.backgroundColor,l.borderColor='white'===a.borderStyle?k:j,l.color=a.color,l.zIndex=5,l.display=-1==e?'none':'',l.height=h.default_ios_tabbar_height,'hide'==this.state.animationType?(l.transition='all linear 0.2s',l.transform=`translateY(-${a.height}px)`):'show'==this.state.animationType&&(l.transition='all linear 0.2s');const m='white'===a.borderStyle?k:j,n=a.selectedColor?a.selectedColor:a.color,o=i.map((d,g)=>{const h=g==e&&a.selectedColor?{color:a.selectedColor}:{color:a.color};let i=g==e?d.selectedIconPath:d.iconPath;i=/^(\\|\/)/.test(i)?i.slice(1):i;i?{}:f.displayNone;return i=i?`${this.props.baseURL}${i}?r=${Math.random()}`:'',c.createElement('div',{className:b('weui-navbar__item',{"weui-bar__item_on":g==e}),style:h,"data-name":d.pagePath,"data-index":g,onClick:this.clickTab.bind(this),key:g},d.text,c.createElement('div',{className:'weui-navbar__item-border',style:{borderColor:n}}))});return c.createElement('div',{className:'weui-navbar',style:l,onAnimationEnd:this.onAnimationEnd.bind(this)},o)}onAnimationEnd(){this.setState({animationType:'none',show:this.props.show})}renderBottom(){const a=this.props;let d=a.tabIndex;this.state.show||(d=-1);const e=a.position||'bottom',g=a.list||[],h={};h.backgroundColor=a.backgroundColor,h.borderColor='white'===a.borderStyle?k:j,h.color=a.color,h.position='absolute',h.zIndex=5,h.display=0<=d?'':'none',h.height=a.height,'hide'==this.state.animationType?(h.transition='all linear 0.2s',h.transform=`translateY(${a.height}px)`):'show'==this.state.animationType&&(h.transition='all linear 0.2s');const i={backgroundColor:'white'===a.borderStyle?k:j},l=g.map((e,g)=>{const h=g==d&&a.selectedColor?{color:a.selectedColor}:{color:a.color};let i=g==d?e.selectedIconPath:e.iconPath;i=/^(\\|\/)/.test(i)?i.slice(1):i;i?{}:f.displayNone;i=i?`${this.props.baseURL}${i}?r=${Math.random()}`:e.iconData?g==d?`data:image/png;base64,${e.selectedIconData}`:`data:image/png;base64,${e.iconData}`:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=';const j={position:'absolute',top:0,left:16};return e.badge&&'none'!=e.badge.type||(j.display='none'),e.badge&&e.badge.backgroundColor&&(j.backgroundColor=e.badge.backgroundColor),c.createElement('a',{className:`weui-tabbar__item ${g==d?'weui-tabbar__item_on':''}`,"data-index":g,"data-name":e.pagePath,onClick:this.clickTab.bind(this),key:g},i&&!e.badge?c.createElement('img',{src:i,className:'weui-tabbar__icon'}):null,i&&e.badge?c.createElement('span',{style:{display:'inline-block',position:'relative'}},c.createElement('img',{src:i,className:'weui-tabbar__icon'}),c.createElement('span',{className:b('weui-badge',{"weui-badge_dot":e.badge&&'redDot'==e.badge.type}),style:j},e.badge&&'text'==e.badge.type&&e.badge.text)):null,c.createElement('p',{className:'weui-tabbar__label',style:h},e.text))});return c.createElement('div',{className:'weui-tabbar',style:h,onAnimationEnd:this.onAnimationEnd.bind(this)},c.createElement('div',{className:'weui-tabbar-border',style:i}),l)}render(){const a=this.props.position;return'top'==a?this.renderTop():this.renderBottom()}}module.exports=m((a)=>{const b=a.simulator.webviewInfos[a.simulator.currentWebviewID]||{},c=a.toolbar.deviceInfo;return _extends({},a.simulator.tabbar,{height:c.tabbarHeight,statusbarHeight:c.statusbarHeight,navigationbarHeight:c.navigationbarHeight,tabIndex:b.tabbarIndex,baseURL:`http://127.0.0.1:${global.proxyPort}/__pageframe__/`,currentWebviewID:a.simulator.currentWebviewID})},(a)=>({switchTab:l.bindActionCreators(e.switchTab,a)}))(n)}(require('lazyload'),require);