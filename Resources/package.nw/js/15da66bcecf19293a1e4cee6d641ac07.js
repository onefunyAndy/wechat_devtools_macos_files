'use strict';!function(require,directRequire){const a=require('./c016c015550b8c8e4a79e8e85062bd17.js'),b=require('./76d9df7b0b3e47fbe17881420a4bef86.js'),c=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),d=require('./ff946754202ecf377034d29daac7c8d9.js'),e=require('./a7261ee5e1a26dddf8d07b048ad1c94d.js'),f=require('./2a0793d184cc5f699ba18197a7403b19.js'),g=(a,b,c,e)=>new Promise((f)=>{const g=(h)=>{h=JSON.parse(h);const{command:i,data:j}=h;i==b&&j.callbackID==c&&(d.off(`WEBVIEW_${a}`,g),f(j.res),'function'==typeof e&&e())};d.on(`WEBVIEW_${a}`,g)});module.exports={[a.Name.FIND_WEBVIEW]:async(a,d)=>{const e=d.route,f=c.getState();let g=null;for(const b in f.simulator.webviewInfos){const a=f.simulator.webviewInfos[b];a.pathName==e&&(g=b)}return g?{status:b.Success,value:{WEBVIEW:g}}:{status:b.InvalidElementState}},[a.Name.FIND_WEBVIEW_ELEMENT]:async(a,e)=>{const f=a.getParameter('webviewId'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.findElement',data:{callbackID:h,value:e.value,using:e.using}})),g(f,'Driver.findElement.callback',h)):{status:b.NoSuchFrame}},[a.Name.FIND_WEBVIEW_ELEMENTS]:async(a,e)=>{const f=a.getParameter('webviewId'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.findElements',data:{callbackID:h,value:e.value,using:e.using}})),g(f,'Driver.findElements.callback',h)):{status:b.NoSuchFrame}},[a.Name.TOUCH_CLICK_WEBVIEW_ELEMENT]:async(a,e)=>{const f=a.getParameter('webviewId'),h=e.element,i=`${Math.random()}${Date.now()}`,j=c.getState();return j.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.tapElement',data:{callbackID:i,ELEMENT:h}})),g(f,'Driver.tapElement.callback',i)):{status:b.NoSuchFrame}},[a.Name.TOUCH_LONGCLICK_WEBVIEW_ELEMENT]:async(a,e)=>{const f=a.getParameter('webviewId'),h=e.element,i=`${Math.random()}${Date.now()}`,j=c.getState();return j.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.longtapElement',data:{callbackID:i,ELEMENT:h}})),g(f,'Driver.longtapElement.callback',i)):{status:b.NoSuchFrame}},[a.Name.TOUCH_DOWN_WEBVIEW]:async(a,e)=>{const f=a.getParameter('webviewId'),{x:h,y:i}=e,j=`${Math.random()}${Date.now()}`,k=c.getState();return k.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.touchDown',data:{callbackID:j,x:h,y:i}})),g(f,'Driver.touchDown.callback',j)):{status:b.NoSuchFrame}},[a.Name.TOUCH_MOVE_WEBVIEW]:async(a,e)=>{const f=a.getParameter('webviewId'),{x:h,y:i}=e,j=`${Math.random()}${Date.now()}`,k=c.getState();return k.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.touchMove',data:{callbackID:j,x:h,y:i}})),g(f,'Driver.touchMove.callback',j)):{status:b.NoSuchFrame}},[a.Name.TOUCH_UP_WEBVIEW]:async(a,e)=>{const f=a.getParameter('webviewId'),{x:h,y:i}=e,j=`${Math.random()}${Date.now()}`,k=c.getState();return k.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.touchUp',data:{callbackID:j,x:h,y:i}})),g(f,'Driver.touchUp.callback',j)):{status:b.NoSuchFrame}},[a.Name.TOUCH_SCROLL_WEBVIEW]:async(a,e)=>{const f=a.getParameter('webviewId'),{xoffset:h,yoffset:i}=e,j=`${Math.random()}${Date.now()}`,k=c.getState();return k.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.scroll',data:{callbackID:j,xoffset:h,yoffset:i}})),g(f,'Driver.scroll.callback',j)):{status:b.NoSuchFrame}},[a.Name.GET_APPSERVICE_DATA]:async()=>new Promise((a)=>{const c=(e)=>{e=JSON.parse(e);const{command:f,data:g}=e;'SEND_APP_DATA'==f&&(d.off('APPSERVICE',c),a({status:b.Success,value:g}))};d.on('APPSERVICE',c),d.sendMessage('APPSERVICE',JSON.stringify({command:'GET_APP_DATA'}))}),[a.Name.SEND_KEYS_TO_WEBVIEW_ELEMENT]:async(a,e)=>{const f=a.getParameter('webviewId'),h=a.getParameter('id'),i=`${Math.random()}${Date.now()}`,j=c.getState();if(!j.simulator.webviewInfos[f])return{status:b.NoSuchFrame};const k=global.windowMap.get('MAIN').window.document,l=j.simulator.webviewInfos[f].pathName,m=k.querySelector(`[route="${l}"]`);return m.focus(),d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.sendKeys',data:{callbackID:i,ELEMENT:h,value:e.value}})),g(f,'Driver.sendKeys.callback',i,()=>{m.blur()})},[a.Name.GET_WEBVIEW_ELEMENT_TAG_NAME]:async(a)=>{const e=a.getParameter('webviewId'),f=a.getParameter('id'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[e]?(d.sendMessage(`WEBVIEW_${e}`,JSON.stringify({command:'Driver.getTagName',data:{callbackID:h,ELEMENT:f}})),g(e,'Driver.getTagName.callback',h)):{status:b.NoSuchFrame}},[a.Name.GET_WEBVIEW_ELEMENT_ATTRIBUTE]:async(a)=>{const e=a.getParameter('webviewId'),f=a.getParameter('id'),h=a.getParameter('name'),i=`${Math.random()}${Date.now()}`,j=c.getState();return j.simulator.webviewInfos[e]?(d.sendMessage(`WEBVIEW_${e}`,JSON.stringify({command:'Driver.getAttribute',data:{callbackID:i,ELEMENT:f,name:h}})),g(e,'Driver.getAttribute.callback',i)):{status:b.NoSuchFrame}},[a.Name.GET_WEBVIEW_ELEMENT_LOCATION]:async(a)=>{const e=a.getParameter('webviewId'),f=a.getParameter('id'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[e]?(d.sendMessage(`WEBVIEW_${e}`,JSON.stringify({command:'Driver.getLocation',data:{callbackID:h,ELEMENT:f}})),g(e,'Driver.getLocation.callback',h)):{status:b.NoSuchFrame}},[a.Name.GET_WEBVIEW_ELEMENT_SIZE]:async(a)=>{const e=a.getParameter('webviewId'),f=a.getParameter('id'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[e]?(d.sendMessage(`WEBVIEW_${e}`,JSON.stringify({command:'Driver.getSize',data:{callbackID:h,ELEMENT:f}})),g(e,'Driver.getSize.callback',h)):{status:b.NoSuchFrame}},[a.Name.GET_WEBVIEW_ELEMENT_RECT]:async(a)=>{const e=a.getParameter('webviewId'),f=a.getParameter('id'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[e]?(d.sendMessage(`WEBVIEW_${e}`,JSON.stringify({command:'Driver.getRect',data:{callbackID:h,ELEMENT:f}})),g(e,'Driver.getRect.callback',h)):{status:b.NoSuchFrame}},[a.Name.GET_WEBVIEW_ELEMENT_VALUE_OF_CSS_PROPERTY]:async(a)=>{const e=a.getParameter('webviewId'),f=a.getParameter('id'),h=a.getParameter('propertyName'),i=`${Math.random()}${Date.now()}`,j=c.getState();return j.simulator.webviewInfos[e]?(d.sendMessage(`WEBVIEW_${e}`,JSON.stringify({command:'Driver.getCssValue',data:{callbackID:i,ELEMENT:f,propertyName:h}})),g(e,'Driver.getCssValue.callback',i)):{status:b.NoSuchFrame}},[a.Name.GET_CURRENT_HTML]:async()=>new Promise(async(a,d)=>{try{const d=c.getState(),f=await e.getCurrentHTML(),g=d.project.current.appid,h=d.simulator.webviewInfos&&d.simulator.webviewInfos[d.simulator.currentWebviewID]||{},i=h.pathName||'';a({status:b.Success,value:f,extend:{appid:g,route:i}})}catch(a){d({status:b.JavaScriptError,value:{message:a.toString()}})}}),[a.Name.GET_SCREENSHOT]:async(a,d)=>new Promise(async(a,f)=>{try{const f=c.getState(),g=d.withSimilarity,h=d.threshold,i=await e.getScreenShot({withSimilarity:g,threshold:h}),j=f.project.current.appid,k=f.simulator.webviewInfos&&f.simulator.webviewInfos[f.simulator.currentWebviewID]||{},l=k.pathName||'';a({status:b.Success,value:i,extend:{appid:j,route:l}})}catch(a){f({status:b.JavaScriptError,value:{message:a.toString()}})}}),[a.Name.GET_CURRENT_PAGE_STACK]:async()=>new Promise(async(a,c)=>{try{const c=await e.getCurrentPageStack();a({status:b.Success,value:c})}catch(a){c({status:b.JavaScriptError,value:{message:a.toString()}})}}),[a.Name.GET_CURRENT_PAGE_TITLE]:async()=>new Promise(async(a,c)=>{try{const c=await e.getCurrentPageTitle();a({status:b.Success,value:c})}catch(a){c({status:b.JavaScriptError,value:{message:a.toString()}})}}),[a.Name.GET_CURRENT_PAGE_QUERY]:async()=>new Promise(async(a,c)=>{try{const c=await e.getCurrentPageQuery();a({status:b.Success,value:c})}catch(a){c({status:b.JavaScriptError,value:{message:a.toString()}})}}),[a.Name.FIND_WEBVIEW_ELEMENT_FROM_POINT]:async(a,e)=>{const f=a.getParameter('webviewId'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.elementFromPoint',data:{callbackID:h,x:e.x,y:e.y}})),g(f,'Driver.elementFromPoint.callback',h)):{status:b.NoSuchFrame,value:{message:err.toString()}}},[a.Name.FIND_WEBVIEW_ACTION_ELEMENT_FROM_POINT]:async(a,e)=>{const f=a.getParameter('webviewId'),h=`${Math.random()}${Date.now()}`,i=c.getState();return i.simulator.webviewInfos[f]?(d.sendMessage(`WEBVIEW_${f}`,JSON.stringify({command:'Driver.actionElementFromPoint',data:{callbackID:h,x:e.x,y:e.y}})),g(f,'Driver.actionElementFromPoint.callback',h)):{status:b.NoSuchFrame}},[a.Name.GET_WEBVIEW_CONTENT_SIZE]:async(a)=>{const e=a.getParameter('webviewId'),f=`${Math.random()}${Date.now()}`,h=c.getState();return h.simulator.webviewInfos[e]?(d.sendMessage(`WEBVIEW_${e}`,JSON.stringify({command:'Driver.getContentSize',data:{callbackID:f}})),g(e,'Driver.getContentSize.callback',f)):{status:b.NoSuchFrame}}}}(require('lazyload'),require);