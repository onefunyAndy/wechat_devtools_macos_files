'use strict';!function(require,directRequire){const a=require('react'),b=require('./3b5f8e2469c474c8d433c1c6926d8999.js'),c=require('./df6d0ff021a69fb541c733de4dbba0fe.js'),d=require('./d559680a1a0c2551cbce1a9fb152cb99.js'),e=require('./4389a88e405d1d37f36c16fc0ec96540.js'),f=require('./common/locales/index.js');class g extends a.Component{constructor(a){super(a),this.state={showDetails:!1,cardIndex:-1}}componentDidMount(){this._cancalLocaleListener=f.onChangeLocale(()=>this.forceUpdate())}componentWillUnmount(){this._cancalLocaleListener()}componentWillReceiveProps(){}formatTime(a){const b=new Date(1e3*a);return`${b.getFullYear()}.${b.getMonth()+1}.${b.getDate()}`}onDetailClick(){this.props.cardInfo&&1<this.props.cardInfo.length?this.setState({showDetails:!1,cardIndex:-1}):this.props.hideCardView({})}cancel(){this.props.hideCardView({})}cardDetail(a){const b=a.currentTarget,c=b.dataset,d=c.index;this.setState({showDetails:!0,cardIndex:d})}render(){const c=this.props,g=c.show?{}:b.displayNone;g.width=c.width,g.height=c.height,g.transform=`scale(${c.deviceScale})`,g.marginLeft=-c.width/2,g.transformOrigin='50% 0';let h=null,i=null;const j=c.cardInfo,k=c.errData,l=!!k.length,m=this.state.showDetails;if(-1!=this.state.cardIndex){const b=j[this.state.cardIndex],e=b.card_data_info,g=b.card_tp_info,k=this.formatTime(e.begin_time),l=this.formatTime(e.end_time),m=g.brand_name,n=g.title,o=g.logo_url;let p;const q={};q.backgroundColor=g.color,p=0===g.limit_num?a.createElement('div',{className:'coupons-profile-action'},a.createElement('button',{className:'coupons-profile-button',style:{borderColor:'#63B35A',color:'#63B35A'}},g.limit_wording)):a.createElement('div',{className:'coupons-profile-action'},a.createElement('button',{className:'coupons-profile-button',style:{borderColor:'#63B35A',color:'#63B35A'}},e.operate_field&&e.operate_field.title||f.config.VIEW_DETAILS)),i=a.createElement(d,{cover:!0,height:c.navigationbarHeight,title:f.config.CARDS_LIST,backgroundColor:'#000000',frontColor:'#ffffff',showLeftBtn:!0,onLeftBtnClick:this.onDetailClick.bind(this)}),h=a.createElement('div',{className:'coupons-detail'},a.createElement('div',{className:'coupons-profile-wrapper'},a.createElement('div',{className:'coupons-profile',style:q},a.createElement('div',{className:'coupons-profile-bd'},a.createElement('div',{className:'ui-flex'},a.createElement('div',{className:'coupons-profile-logo'},a.createElement('img',{src:o})),a.createElement('div',{className:'ui-flex-item'},a.createElement('p',{className:'coupons-profile-biz'},m),a.createElement('p',{className:'coupons-profile-name'},n)))),a.createElement('div',{className:'coupons-profile-ft'},a.createElement('p',{className:'coupons-profile-serial'},f.config.VALID_PERIOD.format([k,l])))),p))}else{const b=j.map((b,c)=>{const d=b.card_tp_info;return a.createElement('div',{className:'coupons-item ui-flex',key:c,"data-index":c,onClick:this.cardDetail.bind(this)},a.createElement('div',{className:'coupons-item-logo'},a.createElement('img',{src:d.logo_url})),a.createElement('div',{className:'ui-flex-item'},a.createElement('p',{className:'coupons-item-biz'},d.brand_name),a.createElement('p',{className:'coupons-item-name'},d.title)))}),e=k.map((b,c)=>a.createElement('div',{key:c,className:'webview-card-choose-item'},a.createElement('div',{className:'webview-card-choose_mErr'},a.createElement('div',{className:'webview-card-choose_details'},a.createElement('div',{className:'webview-card-choose-item_error'},f.config.WRONG_CARD),a.createElement('div',{className:'webview-card-choose-item_error'},'cardId: ',b.card_id),a.createElement('div',{className:'webview-card-choose-item_error'},'code: ',b.code)))));i=a.createElement(d,{height:c.navigationbarHeight,title:f.config.CARDS_LIST,backgroundColor:'#000000',frontColor:'#ffffff',showLeftBtn:!0,onLeftBtnClick:this.cancel.bind(this)}),h=a.createElement('div',{className:'coupons-list'},b,e)}return a.createElement('div',{className:'simulator',style:g},a.createElement(e,null),i,a.createElement('div',{className:'webview'},a.createElement('div',{className:'coupons'},h)))}}module.exports=g}(require('lazyload'),require);