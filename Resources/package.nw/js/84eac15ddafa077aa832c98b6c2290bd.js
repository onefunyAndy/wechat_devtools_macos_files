'use strict';!function(require,directRequire){const a=require('react'),b=require('redux'),c=require('./3b5f8e2469c474c8d433c1c6926d8999.js'),d=require('./ba23d8b47b1f4ea08b9fd49939b9443f.js'),e=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),f=require('./common/locales/index.js'),{connect:g}=require('react-redux'),h=3;class i extends a.Component{constructor(a){super(a),this.state={scopeList:this.formateScopeList(a.scopeList)}}componentDidMount(){this._cancalLocaleListener=f.onChangeLocale(()=>this.forceUpdate())}componentWillUnmount(){this._cancalLocaleListener()}componentWillReceiveProps(a){const b={};a.scopeList!=this.props.scopeList&&(b.scopeList=this.formateScopeList(a.scopeList)),this.setState(b)}formateScopeList(a){return a.map((a)=>{return a.checked=a.auth_state==h||a.auth_state==2,a})}_checkboxChange(a){const b=this.state.scopeList;return()=>{b[a].checked=!b[a].checked,this.setState({scopeList:b})}}handleOnAllow(){this.callback(!0)}handleOnCancel(){this.callback(!1)}callback(a){'function'==typeof this.props.callback&&this.props.callback(a,this.state.scopeList),this.props.setAuthorize(!1)}render(){const b=this.props,d=this.state.scopeList.map((b,c)=>{if(b.auth_state==h)return a.createElement('div',{key:b.scope,className:'weui-agree'},a.createElement('i',{className:'icon-dot'}),a.createElement('span',{className:'weui-agree__text'},b.desc,b.ext_desc));const d='authorize_checkbox'+c,e=!!b.checked;return a.createElement('label',{key:b.scope,className:'weui-agree',htmlFor:d},a.createElement('input',{id:d,type:'checkbox',className:'weui-agree__checkbox',checked:e,onChange:this._checkboxChange(c)}),a.createElement('span',{className:'weui-agree__text'},b.desc,b.ext_desc))});return a.createElement('div',{className:'auth-dialog',style:this.props.show?{}:c.displayNone},a.createElement('div',{className:'weui-mask'}),a.createElement('div',{className:'weui-dialog'},a.createElement('div',{className:'weui-dialog__hd'},a.createElement('strong',{className:'weui-dialog__title'},f.config.WECHAT_AUTHORIZATION)),a.createElement('div',{className:'weui-dialog__bd'},a.createElement('div',{className:'auth-dialog-content'},a.createElement('div',{className:'auth-dialog-logo'},a.createElement('img',{src:b.imageUrl,alt:''})),a.createElement('div',{className:'auth-dialog-title'},f.config.APPLY_PERMISSION.format(b.appName)),a.createElement('div',{className:'auth-dialog-list'},d))),a.createElement('div',{className:'weui-dialog__ft'},a.createElement('a',{className:'weui-dialog__btn weui-dialog__btn_default auto_test_btn_default',"data-type":'authorize',onClick:this.handleOnCancel.bind(this)},f.config.AUTHORIZATION_REFUSE),a.createElement('a',{className:'weui-dialog__btn weui-dialog__btn_primary auto_test_btn_primary',"data-type":'authorize',onClick:this.handleOnAllow.bind(this)},f.config.AUTHORIZATION_PERMIT))))}}module.exports=g((a)=>{const b=a.simulator.authorize||{};return{show:b.show,callback:b.callback,scopeList:b.scopeList||[],imageUrl:b.imageUrl||'',appName:b.appName||''}},(a)=>({setAuthorize:e.bindActionCreators(d.setAuthorize,a)}))(i)}(require('lazyload'),require);