'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('react'),b=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),c=require('./f2b0fd116ee25849124e867e0da34f23.js'),d=require('./9c906d27ca74e18d0deaaa231e71fdfa.js'),e=require('./a8c87029da0fa06e986298d447ab0fe2.js'),{connect:f}=require('react-redux'),g=require('./common/locales/index.js');class h extends a.Component{constructor(a){super(a),this.state={errMsg:''}}componentDidMount(){this._cancalLocaleListener=g.onChangeLocale(()=>this.forceUpdate())}componentWillUnmount(){this._cancalLocaleListener()}onClose(){this.props.setAdditionLogin({show:!1})}onLoginSuccess(a){return a.openid==this.props.openid?(this.setState({errMsg:g.config.ACCOUNT_BOX_ADD_ERR_MSG}),this.props.loginSuccess(a),void this.refs.loginQRCode.wrappedInstance.reloadQRCode()):void(this.props.addAccount(a.openid,a),this.onClose())}render(){return a.createElement('div',{className:'ui-popover2',"x-placement":'right',style:{left:this.props.left,top:this.props.top,zIndex:2}},a.createElement('div',{className:'ui-popover2-hd'},a.createElement('h3',{className:'ui-popover2-title'},g.config.ACCOUNT_BOX_ADD_TITLE),a.createElement('div',{className:'ui-popover2-ext',onClick:this.onClose.bind(this)},a.createElement('a',null,a.createElement('i',{className:'ui-icon-close'})))),a.createElement('div',{className:'ui-popover2-bd'},a.createElement('div',{className:'authenticate'},a.createElement('div',{className:'authenticate-bd'},a.createElement(c,{ref:'loginQRCode',onLoginSuccess:this.onLoginSuccess.bind(this)})),a.createElement('div',{className:'authenticate-ft'},this.state.errMsg?a.createElement('p',{style:{color:'red'}},this.state.errMsg):a.createElement('p',null,g.config.ACCOUNT_BOX_ADD_MSG)))),a.createElement('div',{className:'ui-popover2-arrow'}))}}module.exports=f((a)=>{const b=a.window.additionLogin||{};return _extends({openid:a.user.openid},b)},(a)=>({addAccount:b.bindActionCreators(d.addAccount,a),loginSuccess:b.bindActionCreators(d.loginSuccess,a),setAdditionLogin:b.bindActionCreators(e.setAdditionLogin,a)}))(h)}(require('lazyload'),require);