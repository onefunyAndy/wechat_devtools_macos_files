'use strict';!function(require,directRequire){const a=require('fs'),b=require('path'),c=require('./f171257bbcaef547a3cf27266ccb0db2.js'),d=require('./92320c1386e6db6a6f2556736a9bc280.js'),f=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),e=require('./15ba1827c7f6564a45df6bd44da3a977.js'),g=require('./29552ee79b3c130ddd9b6e8c13c40be9.js'),h=require('./e5fa35c3c8e81bc6466b4b8eb436113b.js');module.exports={getServerScript:(d)=>{return async(h)=>{const{name:i,type:j,writeFile:k,distPath:l}=d,{body:m}=await e({url:c.getServerScript,method:'POST',encoding:null,body:JSON.stringify({script_name:i||'',type:j}),needToken:1,needAppID:1,needParse:-1}),n=await g(m);if(k)for(const c in n){const d=b.join(l,c);a.writeFileSync(d,n[c])}h({type:f.INFO_SHOW_SUCCESS,data:'\u4E0B\u8F7D\u5E76\u8986\u76D6\u6210\u529F'})}},uploadServerScript:(g)=>{return async(i)=>{const j=g.path,k=b.join(d.Weappdest,`${+new Date}.wx`),l=await h(j,k),{body:m}=await e({url:c.uploadServerScript,method:'post',body:l.data,needToken:1,needAppID:1});a.unlinkSync(k),i({type:f.INFO_SHOW_SUCCESS,data:'\u4E0A\u4F20\u6210\u529F'})}},checkServerScript:()=>{return async()=>{}},getServerScriptLog:(a)=>{return async()=>{let{body:a}=await e({url:c.getServerScriptLog,method:'post',needToken:1,needAppID:1,body:JSON.stringify({script_name:name,start_time:startTime,end_time:endTime,limit})});console.log(a)}},uploadResources:(g)=>{return async(i)=>{const j=g.path,k=b.join(d.Weappdest,`${+new Date}.wx`);try{const b=await e({url:c.getServerResourcesInfo,method:'post',needToken:1,needAppID:1}),d={};b.body.list&&b.body.list.forEach((a)=>{d[a.path]=a.md5});const g=await h(j,k,{needMd5:!0,ignoreFileMd5:d}),{body:l}=await e({url:c.uploadServerResources,method:'post',body:g.data,needToken:1,needAppID:1});a.unlinkSync(k),i({type:f.INFO_SHOW_SUCCESS,data:'\u4E0A\u4F20\u6210\u529F'})}catch(a){i({type:f.INFO_SHOW_ERROR,data:{message:a.toString()}})}}},downloadResources:(d)=>{return async(h)=>{const{type:i,writeFile:j,distPath:k}=d,{body:l}=await e({url:c.downloadServerResources,method:'POST',encoding:null,body:JSON.stringify({type:i}),needToken:1,needAppID:1,needParse:-1}),m=await g(l);if(j)for(const c in m){const d=b.join(k,c);a.writeFileSync(d,m[c])}h({type:f.INFO_SHOW_SUCCESS,data:'\u4E0B\u8F7D\u5E76\u8986\u76D6\u6210\u529F'})}}}}(require('lazyload'),require);